<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Contrato de Consignación</title>
    <!-- Estilos Mejorados -->
    <style>
        body {
            font-family: 'Helvetica', 'Arial', sans-serif;
            color: #333;
            padding: 20px;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            background-color: #ffffff;
        }
        header {
            text-align: center;
            margin-bottom: 30px;
        }
        header img {
            max-width: 250px;
            margin-bottom: 10px;
        }
        h1 {
            color: #cc0000;
            font-size: 26px;
            margin-bottom: 5px;
        }
        h2 {
            color: #555;
            font-size: 22px;
            margin-bottom: 15px;
            border-bottom: 2px solid #cc0000;
            padding-bottom: 5px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table th, table td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
            font-size: 16px;
        }
        .btn {
            display: inline-block;
            padding: 12px 25px;
            font-size: 18px;
            color: #fff;
            background-color: #007bff;
            border: none;
            border-radius: 5px;
            text-decoration: none;
            text-align: center;
            margin: 20px 10px 0 0;
            cursor: pointer;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .terms ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        .terms li {
            margin-bottom: 10px;
            font-size: 16px;
        }
        /* Estilos Responsivos */
        @media (max-width: 600px) {
            body {
                padding: 15px;
            }
            header img {
                max-width: 200px;
            }
            h1 {
                font-size: 22px;
            }
            h2 {
                font-size: 20px;
            }
            table th, table td {
                font-size: 14px;
                padding: 8px;
            }
            .btn {
                font-size: 16px;
                padding: 10px 20px;
            }
            .terms li {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>

    <header>
        <img src="https://www.queirolo.cl/img/logo.png?2" alt="Logo Empresa">
        <h1>CONTRATO DE CONSIGNACIÓN</h1>
        <p>CONSECIONARIA AUTORECENTE SPA RUT 77.194.213K</p>
        <p>CASA MATRIZ: Av. LAS CONDES 12461 LOCAL 4A, LAS CONDES, SANTIAGO.</p>
    </header>

    <h2>Datos del Vehículo</h2>
    <table class="four-columns">
        <tr>
            <th>Vehículo</th><td id="vehiculo"></td>
            <th>Marca</th><td id="marca"></td>
        </tr>
        <tr>
            <th>Modelo</th><td id="modelo"></td>
            <th>Año</th><td id="anio"></td>
        </tr>
        <tr>
            <th>Chasis</th><td id="chasis"></td>
            <th>Motor</th><td id="num_motor"></td>
        </tr>
        <tr>
            <th>Patente</th><td id="patente"></td>
            <th>Kilometraje</th><td id="kilometraje"></td>
        </tr>
        <tr>
            <th>Permiso de Circulación</th><td id="permiso_circulacion"></td>
            <th>Revisión Técnica</th><td id="revision_tecnica"></td>
        </tr>
        <tr>
            <th>Seguro Obligatorio</th><td id="seguro_obligatorio"></td>
            <th>Precio de Publicación</th><td id="precio_publicacion"></td>
        </tr>
        <tr>
            <th>Tipo de Venta</th><td id="tipo_venta"></td>
        </tr>
    </table>

    <h2>Datos del Cliente</h2>
    <table class="four-columns">
        <tr>
            <th>RUT</th><td id="rut_cliente"></td>
            <th>Nombre y Apellido</th><td id="nombre_apellido"></td>
        </tr>
        <tr>
            <th>Dirección</th><td id="direccion"></td>
            <th>Teléfono</th><td id="telefono"></td>
        </tr>
        <tr>
            <th>Correo</th><td id="correo"></td>
            <th>Fecha</th><td id="fecha_consignacion"></td>
        </tr>
    </table>

    <h2>Términos y Condiciones</h2>
    <div class="terms">
        <ul>
            <li>El monto a liquidar por la venta será acordado en el cierre de la transacción, confirmado por escrito.</li>
            <li>En caso de retiro del vehículo antes de la venta, se aplicará una tarifa de $75,000.</li>
            <li>El vendedor asume la responsabilidad de cualquier multa sobre el vehículo.</li>
            <li>El mandatario no es responsable por daños derivados de fuerza mayor no cubiertos por el seguro.</li>
            <li>La comisión por venta es del 5% sobre el precio de venta, con un mínimo de $500,000 más IVA.</li>
            <li>El pago se realizará dentro de 7 días hábiles posteriores a la venta del vehículo.</li>
            <li>El vendedor asegura que el kilometraje del vehículo no ha sido alterado.</li>
            <li>El vehículo será inspeccionado antes de recibirlo. Cualquier daño deberá ser reparado.</li>
        </ul>
    </div>

    <!-- Botones -->
    <div style="margin-top: 30px;">
        <a href="#" class="btn" id="generate-pdf">Generar PDF</a>
        <a href="/" class="btn">Volver al Formulario</a>
    </div>

    <!-- jsPDF Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.4.0/jspdf.umd.min.js"></script>

    <script>
        // Obtener parámetros de la URL
        const urlParams = new URLSearchParams(window.location.search);

        document.getElementById('vehiculo').innerText = urlParams.get('vehiculo');
        document.getElementById('marca').innerText = urlParams.get('marca');
        document.getElementById('modelo').innerText = urlParams.get('modelo');
        document.getElementById('anio').innerText = urlParams.get('anio');
        document.getElementById('chasis').innerText = urlParams.get('chasis');
        document.getElementById('num_motor').innerText = urlParams.get('num_motor');
        document.getElementById('patente').innerText = urlParams.get('patente');
        document.getElementById('kilometraje').innerText = urlParams.get('kilometraje');
        document.getElementById('permiso_circulacion').innerText = urlParams.get('permiso_circulacion');
        document.getElementById('revision_tecnica').innerText = urlParams.get('revision_tecnica');
        document.getElementById('seguro_obligatorio').innerText = urlParams.get('seguro_obligatorio');
        document.getElementById('precio_publicacion').innerText = urlParams.get('precio_publicacion');
        document.getElementById('tipo_venta').innerText = urlParams.get('tipo_venta');
        document.getElementById('rut_cliente').innerText = urlParams.get('rut_cliente');
        document.getElementById('nombre_apellido').innerText = urlParams.get('nombre_apellido');
        document.getElementById('direccion').innerText = urlParams.get('direccion');
        document.getElementById('telefono').innerText = urlParams.get('telefono');
        document.getElementById('correo').innerText = urlParams.get('correo');
        document.getElementById('fecha_consignacion').innerText = urlParams.get('fecha_consignacion');

        // Generar PDF usando jsPDF
        document.getElementById('generate-pdf').addEventListener('click', function() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();

            doc.setFontSize(16);
            doc.text('Contrato de Consignación', 10, 20);

            doc.setFontSize(14);
            doc.text('Datos del Vehículo', 10, 30);

            doc.setFontSize(12);
            let yPosition = 40;
            const lineHeight = 7;

            const addText = (text) => {
                doc.text(text, 10, yPosition);
                yPosition += lineHeight;
                if (yPosition > 280) {
                    doc.addPage();
                    yPosition = 20;
                }
            };

            addText(`Vehículo: ${urlParams.get('vehiculo')}`);
            addText(`Marca: ${urlParams.get('marca')}`);
            addText(`Modelo: ${urlParams.get('modelo')}`);
            addText(`Año: ${urlParams.get('anio')}`);
            addText(`Chasis: ${urlParams.get('chasis')}`);
            addText(`Motor: ${urlParams.get('num_motor')}`);
            addText(`Patente: ${urlParams.get('patente')}`);
            addText(`Kilometraje: ${urlParams.get('kilometraje')}`);
            addText(`Permiso de Circulación: ${urlParams.get('permiso_circulacion')}`);
            addText(`Revisión Técnica: ${urlParams.get('revision_tecnica')}`);
            addText(`Seguro Obligatorio: ${urlParams.get('seguro_obligatorio')}`);
            addText(`Precio de Publicación: ${urlParams.get('precio_publicacion')}`);
            addText(`Tipo de Venta: ${urlParams.get('tipo_venta')}`);
            yPosition += lineHeight;

            doc.setFontSize(14);
            addText('Datos del Cliente');
            yPosition += lineHeight;

            doc.setFontSize(12);
            addText(`RUT: ${urlParams.get('rut_cliente')}`);
            addText(`Nombre y Apellido: ${urlParams.get('nombre_apellido')}`);
            addText(`Dirección: ${urlParams.get('direccion')}`);
            addText(`Teléfono: ${urlParams.get('telefono')}`);
            addText(`Correo: ${urlParams.get('correo')}`);
            addText(`Fecha de Consignación: ${urlParams.get('fecha_consignacion')}`);
            yPosition += lineHeight;

            doc.setFontSize(14);
            addText('Términos y Condiciones');
            yPosition += lineHeight;

            doc.setFontSize(11);
            const terms = [
                'El monto a liquidar por la venta será acordado en el cierre de la transacción, confirmado por escrito.',
                'En caso de retiro del vehículo antes de la venta, se aplicará una tarifa de $75,000.',
                'El vendedor asume la responsabilidad de cualquier multa sobre el vehículo.',
                'El mandatario no es responsable por daños derivados de fuerza mayor no cubiertos por el seguro.',
                'La comisión por venta es del 5% sobre el precio de venta, con un mínimo de $500,000 más IVA.',
                'El pago se realizará dentro de 7 días hábiles posteriores a la venta del vehículo.',
                'El vendedor asegura que el kilometraje del vehículo no ha sido alterado.',
                'El vehículo será inspeccionado antes de recibirlo. Cualquier daño deberá ser reparado.'
            ];

            terms.forEach((term, index) => {
                const splitText = doc.splitTextToSize(`${index + 1}. ${term}`, 180);
                splitText.forEach(line => {
                    addText(line);
                });
                yPosition += lineHeight * 0.5;
            });

            // Descargar el PDF
            doc.save('contrato-consignacion.pdf');
        });
    </script>
</body>
</html>
